# Instructions for setting up software on a new computer
#   Install Command line tools, XAqua, dotfiles, brews and brew casks
#   Builds appropriate symlinks
#   This is not effective as a script but should be run manually line by line in Terminal

# This is a hack which prompts you to install XCode's command line tools without needing XCode
xcode-select --install

# Install Homebrew
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
brew update
brew upgrade
brew doctor

# Install critical binaries (casks)
brew cask install xquartz  # Homebrew may demand this
brew cask install caffeine # Keep Mac awake during lengthy downloads
brew cask install iterm2 # Then close Terminal, never to reopen

# Compile packages (brews)
brew install gcc # Better C compiler with Fortran support

# git
brew install git
git config --global user.name "nebader"
git config --global user.email "nbader@gmail.com"
cd # just to make sure we're still in the home directory
git clone git://github.com/nebader/dotfiles.git
# Now you have this script locally in the dotfiles folder: close remote computer and resume from local in TextEdit
ln -sv ~/dotfiles/vimrc ~/.vimrc
ln -sv ~/dotfiles/spacemacs ~/.spacemacs
ln -sv ~/dotfiles/bashrc ~/.bashrc
ln -sv ~/dotfiles/bashrc ~/.bash_profile # on OS X, .bash_profile is always run

# Emacs
brew tap d12frosted/Emacs-plus # For Spacemacs
brew install emacs-plus
ln -s /usr/local/opt/emacs-plus/Emacs.app /Applications # Put a startup icon in Applications
git clone https://github.com/syl20bnr/spacemacs ~/.emacs.d # After SPC-f-e-D will ask whether to follow symbolic link - say yes
# Now you have emacs; close TextEdit and start in emacs

# LaTeX
brew install ghostscript # MacTeX will need this
brew cask install mactex
brew install pandoc
brew install lilypond # currently not working; homebrew has no formula and the old tap is deprecated

# R
brew install openblas # Library of fast numerical algorithms
brew install r --with-openblas # This compiled version is faster than the binary
brew cask install rstudio

# Python
brew install wget # Retrieves content from web servers, but does not install it
wget https://repo.continuum.io/miniconda/Miniconda3-latest-MacOSX-x86_64.sh # Fetches miniconda
bash Miniconda3-latest-MacOSX-x86_64.sh # Runs the installation script;
#    refuse if offer to prepend ~/miniconda3/bin to $PATH - should already be there
rm ~/Miniconda3-latest-MacOSX-x86_64.sh # Cleans up
conda install anaconda
conda update --all
conda clean -a --verbose

# Install application binaries
brew cask install java
brew cask install dropbox
brew cask install google-backup-and-sync
# Manually sign in to Dropbox and Google Backup and Sync to start downloads
brew cask install google-chrome # Already installed on my work machine
brew cask install google-earth-pro
brew cask install vlc # Already installed on my work machine

brew cleanup -v
brew prune -v

# FINISH syncing Dropbox and before this step!!
# Build symlinks to Dropbox
# syntax: ln -sv ["real"_file] [new link location]
cd
sudo rm -rf Documents
ln -sv ~/Dropbox/backup/Documents ~/Documents
ln -sv ~/Dropbox/backup/Scripts ~/Scripts
ln -sv ~/Dropbox/backup/Sites ~/Sites
ln -sv ~/Dropbox/backup/Documents/texmf ~/Library/texmf
ln -sv /Users/nbader/Dropbox/backup/Google\ Earth /Users/nbader/Library/Application\ Support/Google\ Earth
